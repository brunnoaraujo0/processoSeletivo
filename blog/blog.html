<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styleBlog.css">
    <link rel="icon" href="img/icone.png" type="image/png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://unpkg.com/scrollreveal"></script>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;800&display=swap" rel="stylesheet">
</head>
<body>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-analytics.js";
        
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAhbhFqGejkp4mDvre-6b6tC45uCzyStCc",
          authDomain: "processoseletivo-e7368.firebaseapp.com",
          projectId: "processoseletivo-e7368",
          storageBucket: "processoseletivo-e7368.appspot.com",
          messagingSenderId: "589971043944",
          appId: "1:589971043944:web:c945e05721151d56656ddd",
          measurementId: "G-QRB1863Z29"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const postleft = document.querySelector('.postleft');

        document.querySelector('.doPost button').addEventListener('click', (e) => {
                    e.preventDefault();
                    const doPostTitle = document.querySelector('.doPost input').value;
                    const doPostTexto = document.querySelector('.doPost textarea').value;
                    db.collection("topicos").add({
            title: doPostTitle,
            text: doPostTexto  
            })
.then((docRef) => {
   alert("TÃ³pico cadastrado com sucesso!");
})
.catch((error) => {
    console.error("Error adding document: ", error);
});

posts()
document.querySelector('.doPost input').value = ' ';
document.querySelector('.doPost textarea').value = ' ';
                } )


        function posts(){    
        db.collection('topicos').get().then(snapshot => {
            const topicosList = snapshot.docs.reduce((acc, doc) => {
                acc = ``;
                const postitem = document.createElement("div"); 
                postitem.classList.add("post-item"); 

                const div = document.createElement("div");
                const img = document.createElement("img");
                img.src =  'img/aspas.png';


                const title = document.createElement("h1");
                title.innerHTML =  doc.data().title;
                div.appendChild(img);
                div.appendChild(title);
                postitem.appendChild(div);

                const text = document.createElement("h3");
                text.innerHTML =  doc.data().text;
                postitem.appendChild(text);
                
                
               
               


                const data = document.createElement("h2");
                data.innerHTML =  'Publicado em: 16 de Julho de 2014';
                postitem.appendChild(data);



                postleft.appendChild(postitem);  
                return acc
            }, '')
            
            
            console.log(topicosList)
        }).catch(err => {
            console.log(err.message)
        })

    }
    posts();

      </script>
    <header>
        <img src="img/logo.png"/>
        <span class="material-symbols-outlined">
            menu
            </span>
    </header>
    <div class="menu-hamburguer">
        <a href="/index.html">Perfil</a>
        <a href="/include/include.html">Include</a>
        <a href="/blog/blog.html">Blog Pessoal</a>
        
    </div>
    <section id="inicio">
        <img class="foto" src="img/foto.png" alt="foto"/>
        <img class="logo" src="img/logo1.png" alt="logo">
    </section>
    <section id="post">
        <div class="postleft" data-js="postleft">
            <div class="post-cabecalho">
                <h1>Posts</h1>
            </div>
        
            
        </div>
        <div class="post-right"> 
            <div class="doPost">
                <h1>Escreva um post</h1>
                <input class="title-dopost" type="text" placeholder="Escreva um titulo..."/>
                <textarea placeholder="Escreva o texto..."></textarea>
                <button>Publicar</button>
            </div>
        </div>
    </section>
    <section id="footer">
        <div class="footer-redeSociais">
            <img class="footer-img" src="img/logo2.png" alt="logo"/>
            <a href="https://wa.me/5584988716812?text=Ol%C3%A1%2C+quero+fazer+um+or%C3%A7amento%21"><div class="footer-redesSociais-item"><img src="img/whats.png"/></div></a>
            <a href="https://www.instagram.com/brunnoaraujo0/"><div class="footer-redesSociais-item"><img src="img/instagram.png"/></div></a>
            <a href="https://www.linkedin.com/in/bruno-araujo-58796a246/"><div class="footer-redesSociais-item"><img src="img/linkedin.png"/></div></a>
            <a href="https://github.com/brunnoaraujo0"><div class="footer-redesSociais-item"><img src="img/github.png"/></div></a>
        </div>
        <img class="footer-rodape" src="img/rodape.png" alt="rodape"/>
    </section>
    <script src="script.js"></script>
</body>
</html>